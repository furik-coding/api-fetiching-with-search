{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"scripts.js","sourcesContent":["\n\nconsole.log('[READY]');\n\nfunction getCookie(name) {\n\tlet matches = document.cookie.match(new RegExp(\n\t\t\"(?:^|; )\" + name.replace(/([\\.$?*|{}\\(\\)\\[\\]\\\\\\/\\+^])/g, '\\\\$1') + \"=([^;]*)\"\n\t));\n\treturn matches ? decodeURIComponent(matches[1]) : undefined;\n}\n\nfunction setCookie(name, value, options = {}) {\n\n\toptions = {\n\t\tpath: '/',\n\t\t// при необходимости добавьте другие значения по умолчанию\n\t\t...options\n\t};\n\n\tif (options.expires instanceof Date) {\n\t\toptions.expires = options.expires.toUTCString();\n\t}\n\n\tlet updatedCookie = encodeURIComponent(name) + \"=\" + encodeURIComponent(value);\n\n\tfor (let optionKey in options) {\n\t\tupdatedCookie += \"; \" + optionKey;\n\t\tlet optionValue = options[optionKey];\n\t\tif (optionValue !== true) {\n\t\t\tupdatedCookie += \"=\" + optionValue;\n\t\t}\n\t}\n\n\tdocument.cookie = updatedCookie;\n}\n\nfunction deleteCookie(name) {\n\tsetCookie(name, \"\", {\n\t\t'max-age': -1\n\t})\n}\n\nconst giphyAPIUri = 'https://api.giphy.com/v1/gifs/';\nconst giphyToken = 'fddOYO9tcr0XbAeEHFOTW8fik5Jh9bMw';\nconst giphyLimit = 8;\n\nconst giphyContainer = document.getElementById('giphyContainer');\n\nsetCookie('limit', giphyLimit);\n\n// Trending Request Func\nasync function toGiphyRequest(apiKey, limit) {\n\n\tdeleteCookie('giphyQuery');\n\tsetCookie('limit', limit);\n\tlet dataRes = await fetch(giphyAPIUri + 'trending?api_key=' + apiKey + '&limit=' + limit);\n\tlet dataFormated = await dataRes.json();\n\n\tconsole.log(dataFormated);\n\n\n\n\treturn dataFormated;\n}\n\n// Search Request Func\nasync function toGiphySearchRequest(apiKey, query, limit) {\n\n\tsetCookie('giphyQuery', query);\n\tsetCookie('limit', limit);\n\n\tlet dataRes = await fetch(giphyAPIUri + 'search?api_key=' + apiKey + '&q=' + query + '&limit=' + limit);\n\tlet dataFormated = await dataRes.json();\n\n\n\n\treturn dataFormated;\n}\n\n// Generating columns of gifs\nfunction htmlGenerating(data, showmore) {\n\t\n\n\tif(showmore) {\n\t\tdata.forEach((item, index) => {\n\t\t\tconsole.log(index, parseInt(getCookie('limit')));\n\t\t\tif(index >= (parseInt(getCookie('limit'))) - 8) {\n\t\t\t\tgiphyContainer.innerHTML = giphyContainer.innerHTML + `<div class=\"col-3 giphy__item\">\n\t\t\t\t<a target=\"_blank\" href=\"${item.bitly_gif_url}\" class=\"giphy__item-content\"><img src=\"${item.images.downsized.url}\" alt=\"gif\" /></a>\n\t\t\t\t</div>` ;\n\t\t\t}\n\t\t})\n\t} else {\n\t\tdata.forEach((item, index) => {\n\t\t\tgiphyContainer.innerHTML = giphyContainer.innerHTML + `<div class=\"col-3 giphy__item\">\n\t\t\t\t<a target=\"_blank\" href=\"${item.bitly_gif_url}\" class=\"giphy__item-content\"><img src=\"${item.images.downsized.url}\" alt=\"gif\" /></a>\n\t\t\t\t</div>` ;\n\t\t})\n\t}\n}\n\n\nasync function loadMoreGIFs() {\n\tif (getCookie('giphyQuery')) {\n\t\ttoGiphySearchRequest(giphyToken, getCookie('giphyQuery'), parseInt(getCookie('limit')) + 8).then(dataStart => {\n\t\t\tconsole.log(dataStart);\n\n\t\t\thtmlGenerating(dataStart.data, true);\n\t\t})\n\t} else {\n\t\ttoGiphyRequest(giphyToken, parseInt(getCookie('limit')) + 8).then(dataStart => {\n\t\t\tconsole.log(dataStart);\n\n\t\t\thtmlGenerating(dataStart.data, true);\n\t\t})\n\t}\n}\n\n\n\n\nconst searchForm = document.getElementById('searchForm');\nsearchForm.addEventListener('submit', function (e) {\n\te.preventDefault();\n\tlet input = searchForm.querySelector('input');\n\tgiphyContainer.innerHTML = '';\n\n\tif (input.value) {\n\t\ttoGiphySearchRequest(giphyToken, input.value, giphyLimit).then(dataStart => {\n\t\t\tconsole.log(dataStart);\n\n\t\t\thtmlGenerating(dataStart.data);\n\t\t})\n\t} else {\n\t\ttoGiphyRequest(giphyToken, giphyLimit).then(dataStart => {\n\t\t\tconsole.log(dataStart);\n\n\t\t\thtmlGenerating(dataStart.data);\n\t\t})\n\t}\n\n});\n\nconst giphyShowmoreBtn = document.querySelector('.giphy__showmore');\ngiphyShowmoreBtn.addEventListener('click', function() {\n\tloadMoreGIFs();\n})\n\n\ntoGiphyRequest(giphyToken, giphyLimit).then(dataStart => {\n\tconsole.log(dataStart);\n\n\thtmlGenerating(dataStart.data);\n})\n\n\n\n\n\n\n"]}